<%= page_header(@provider.name, 'API Access') %>

<%- if @api_subjects.empty? -%>
  <%= info_message('No API Accounts') do -%>
    <strong><%= @provider.name %></strong> does not yet have any API accounts
    created.
  <%- end -%>
<%- else -%>
  <table class="ui very basic compact table">
    <thead>
      <tr>
        <th>Name</th>
        <th>Description</th>
        <th>X.509 CN</th>
        <th>Actions</th>
      </tr>
    </thead>
    <tbody>
      <%- @api_subjects.each do |api_subject| -%>
        <tr>
          <td><%= api_subject.name %></td>
          <td><%= api_subject.description %></td>
          <td><%= api_subject.x509_cn %></td>
          <td>
            <%= button_link_to([:edit, @provider, api_subject], class: 'tiny icon') do -%>
              <%= icon_tag('edit') %>
              Edit
            <%- end -%>

            <%= delete_button_tag([@provider, api_subject]) %>
          </td>
        </tr>
      <%- end -%>
    </tbody>
  </table>
<%- end -%>

<%= button_link_to(new_provider_api_subject_path(@provider), class: 'large green icon') do -%>
  <%= icon_tag('add') %>
  New API Account
<%- end -%>
